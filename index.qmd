---
title: "TITANIC: Explorando dados do naufr√°gio"
author: "Majory Melo"
date: 02/19/2023
format: html 
bibliography: referencias.bib
csl: abnt.csl
code-fold: true
code-summary: "Mostrar C√≥digo"
editor: visual
toc: true
toc-depth: 4
toc-location: left
number-sections: true
number-depth: 4
theme: 
  light: [flatly, ajustes.css] 
  dark: [darkly, ajustes.css]
lang: pt
---

```{r Carregamento de Pacotes, message=FALSE, warning=FALSE, include=FALSE}
library(leaflet)
library(tidyverse)
library(ggplot2)
library(ggpubr)
library(fastDummies)
library(randomForest)

```

# Introdu√ß√£o

O presente documento √© o trabalho de conclus√£o do Curso de Ver√£o IME-USP 2022 - Relat√≥rios reprodut√≠veis com R, e tem por objetivo demostrar os conceitos e t√©cnicas abordadas ao longo do curso para a elabora√ß√£o de relat√≥rios reprodut√≠veis em R.

O tema escolhido para estruturar o relat√≥rio √© a constru√ß√£o de um modelo de *machine learning* com base na an√°lise de dados dos passageiros do transatl√¢ntico Titanic, que afundou em sua viagem inaugural em 1912.

Para isso, o documento se divide em 03 partes:

1.  Introdu√ß√£o

    -   Apresenta√ß√£o da justificativa e objetivo do relat√≥rio.

2.  Hist√≥ria do Titanic

    -   Exposi√ß√£o das informa√ß√µes sobre a constru√ß√£o do navio, o desastre e a relev√¢ncia do evento nos dias atuais.

3.  Titanic e a Ci√™ncia de Dados

    -   Detalhamento dos procedimentos para realiza√ß√£o da an√°lise de dados dos passageiros e constru√ß√£o do modelo de predi√ß√£o, bem como a avalia√ß√£o dos resultados obtidos.

4.  Referencias bibliogr√°ficas

    -   Rela√ß√£o da fonte de pesquisa que embasou este documento.

# A Hist√≥ria do Titanic

[![RMS Titanic partindo de Southampton em 10 de abril de 1912](imagens/RMS_Titanic_3.jpg){fig-alt="RMS Titanic partindo de Southampton em 10 de abril de 1912" fig-align="left" width="800"}](https://pt.wikipedia.org/wiki/Ficheiro:RMS_Titanic_3.jpg)

No dia 10 de abril de 1912, o maior transatl√¢ntico j√° constru√≠do at√© ent√£o zarpava do porto de Southampton, na Inglaterra, com destino a Nova York.

Na madruagada do dia 15 de abril, o luxuoso transatl√¢ntico colidiu com um iceberg no Atl√¢ntico Norte , afundando em menos de tr√™s horas. Dos 2.224 passageiros e tripulantes, mais de 1500 pessoas morreram e um pouco mais de 700 conseguiram ser resgatadas pelo navio Carpathia.

## Traget√≥ria

Em Mar√ßo de 1909 as empresas Harland and Wolff e White Star Line iniciaram a constru√ß√£o do Titanic em Belfast na Irlanda.

Ap√≥s 03 anos de constru√ß√£o, no dia 10 de abril de 1912 o Titanic ficou pronto para sua viagem inaugural, zarpando do porto de Southampton, Inglaterra.

Ainda no dia 10 ele chega ao porto de Cherbourg na Fran√ßa e no dia 11 ancora em Queenstown, Irlanda de onde seguiu viagem rumo aos Estados Unidos.

No dia 15 de abril, ap√≥s colidir num iceberg o Tinatic afunda a 500km da costa do Canad√°.

```{r}
  
  leaflet()|>
  leaflet::addProviderTiles(provider = "Esri.WorldStreetMap")|>
  addMarkers(lng=-5.90171, lat=54.61473, popup="Local de Constru√ß√£o - Estaleiro Harland & Wolff")|>
  addMarkers(lng=-1.43570,lat=50.90980, popup="Partida - Southampton")|>
  addMarkers(lng=-1.61151,lat=49.64590, popup="Primeira Parada - Cherbourg")|>
  addMarkers(lng=-8.629906,lat=51.685049, popup="Segunda Parada - Queenstown")|>
  addMarkers(lng=-74.06663,lat=40.62720, popup="Destino - Nova York")|> 
  addMarkers(lng=-49.946944,lat=41.725556, popup="Local do Naufr√°gio")
```

## Dados sobre Passageiros e Sobreviventes

|     Classe     | Passageiros | Sobreviventes |
|:--------------:|:-----------:|:-------------:|
|     **1**      |     325     |      202      |
|     **2**      |     285     |      118      |
|     **3**      |     706     |      178      |
| **Tripula√ß√£o** |     908     |      212      |
|   **Totais**   |    2.224    |      710      |

: **Tabela 1: Classe x Passageiros x Sobreviventes**

## Legado

De todos os naufr√°gios conhecidos at√© hoje, o Titanic √© sem d√∫vidas o mais memor√°vel. Isso se deve a v√°rios fatores como por exemplo, a grande publicidade feita ao seu lan√ßamento, foi considerado o navio inafund√°vel; neglig√™ncia corporativa, por n√£o terem equipado o navio com coletes e botes salva-vidas suficientes; neglig√™ncia humana, relatos apontam que o capit√£o apesar de ter sido avisado sobre o potencial dos icebergs nas √°guas do norte, manteve o Titanic cruzando o Atl√¢ntico a toda velocidade. E por fim, condi√ß√µes clim√°ticas. Pessoas que n√£o se afogaram, morreram de hipotermia nas √°guas g√©lidas.

Como legado, a cat√°strofe ati√ßou o fasc√≠cio das pessoas em querer saber mais detalhes sobre o evento e assim, desde ent√£o tem-se livros, document√°rios, museus e filmes para o deleite desse p√∫blico.

Mas o legado mais importante, √© a revis√£o e cria√ß√£o de processos, normas e legisla√ß√µes mar√≠timas.

### Destro√ßos

Por muitos anos exploradores tra√ßaram planos de encontrar o navio e retir√°-lo do oceano.

O Titanic foi encontrado em 01 de setembro de 1985 por uma expedi√ß√£o franco-americana. Durante a miss√£o, constataram que o navio havia se partido e que pela sua profundidade seria imposs√≠vel resgat√°-lo do mar.

Uma expedi√ß√£o mais recente, 2022, capturou imagens em alta resolu√ß√£o para auxiliar no estudo da taxa de deteoriza√ß√£o do navio, bem como contribuir para uma melhor documenta√ß√£o arqueol√≥gica.

O v√≠deo abaixo √© uma das amostras do material elaborado.

{{< video https://youtu.be/x40SAJS2whY >}}

# Titanic e a Ci√™ncia de Dados

Em 2012, no centen√°rio do naufr√°gio, a [kaggle.com](http://kaggle.com/competitions/titanic/) lan√ßou o desafio, ***Titanic: Machine Learning from Disaster***, cujo objetivo √© atrav√©s dos dados reais dos passageiros, desenvolver um modelo de aprendizado de m√°quina que preveja quais passageiros sobreviveram ao naufr√°gio do Titanic.

Desde ent√£o, a competi√ß√£o se popularizou e √© amplamente conhecida pelos profissionais da √°rea de ci√™ncia de dados.

## Entendimento do Contexto

Sem d√∫vidas o desastre do Titanic √© o mais marcante de todos os tempos.

Propagandas exageradas, neglig√™ncia empresarial e humana, al√©m das condi√ß√µes clim√°ticas foram fatores que contribu√≠ram para o desastre.

Independente das causas, o fato √© que o naufr√°gio matou 1502 pessoas de um total de 2224 passageiros.

Embora aqueles que escaparam com vida tiveram sua dose de sorte, alguns grupos de pessoas eram mais propensos a sobreviverem do que outros. Por exemplo, mulheres, crian√ßas e passageiros da 1¬™ Classe. Assim, nota-se que existe algum padr√£o que pode ser extra√≠do dos dados brutos.

A partir da an√°lise de dados dos passageiros e etendimento do contexto, ser√° avaliado quais vari√°veis podem ter contribuido na probabilidade de sobreviv√™ncia. Na sequ√™ncia, ser√° constru√≠do um modelo de *machine learing* que determine se o passageiro, fornecido como *input*, sobreviveu ou n√£o ao naufr√°gio.

## Importa√ß√£o dos Dados

Foram disponibilizados dois grupos de dados:

-   *Dataset* de treino `train.csv`

    -   Ser√° utilizado para constru√ß√£o do modelo de *machine learning*;
    -   Informa se o passageiro sobreviveu ou n√£o;
    -   Cont√©m diversas vari√°veis (*features*) como nome, idade, g√™nero do passageiro e classe do embarque.

-   *Dataset* de teste `test.csv`

    -   Cont√©m das mesmas vari√°veis do arquivo `train.csv`;
    -   N√£o informa se o passageiro sobreviveu ou n√£o;
    -   Ser√° usado como dados que nunca forma vistos pelo modelo.

```{r Leitura da base de dados, message=FALSE, warning=FALSE}
    train <- readr::read_csv(
        here::here("dados", "train.csv"))

    test <- readr::read_csv(
        here::here("dados", "test.csv"))
```

### Dados da Amostra Treino

Exibindo dados das 4 primeiras amostras do banco de dados `train.csv` `r formattable::formattable(head(train, n=4))`

-   **Quantidade de Observa√ß√µes (Linhas):** *`r nrow(train)`*
-   **Quantidade de Vari√°veis (Colunas):** *`r ncol(train)`*

### Dados da Amostra Teste

Exibindo dados das 4 primeiras amostras do banco de dados `test.csv` `r formattable::formattable(head(test, n=4))`

-   **Quantidade de Observa√ß√µes (Linhas):** *`r nrow(test)`*
-   **Quantidade de Vari√°veis (Colunas):** *`r ncol(test)`*

### Unifica√ß√£o da Base de Dados

Unificar a base de dados `train.csv` com a base de dados `test.csv`, para ser usado na constru√ß√£o do modelo e facilitar o tratamento das vari√°veis.

Para isso, √© preciso tratar a base da dados `test.csv` para que tenha-se a coluna `Survived`e assim fique com a mesmas colunas que a base de dados `train.csv`

```{r warning=FALSE, include=FALSE}
test$Survived <- NA #Adicionando a var√°vel Suvived no banco de dados teste
fulldados <- rbind(train,test) # Cria√ß√£o de um banco de dados unificado

```

Exibindo dados das 4 primeiras amostras do banco de dados `fulldados` `r formattable::formattable(head(fulldados, n=4))`

-   **Quantidade de Observa√ß√µes (Linhas):** *`r nrow(fulldados)`*
-   **Quantidade de Vari√°veis (Colunas):** *`r ncol(fulldados)`*

### Dicion√°rio de Dados

<table>
<thead>
<tr class="header">
<th style="text-align: center;"><p>Vari√°vel</p></th>
<th style="text-align: left;"><p>Descri√ß√£o</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><p>PassengerId</p></td>
<td style="text-align: left;"><p>N√∫mero de identifica√ß√£o do passageiro</p></td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>Survived</p></td>
<td style="text-align: left;"><p>Vari√°vel indicadora de sobreviv√™ncia</p>
<ul>
<li><p>0 = No</p></li>
<li><p>1 = Yes</p></li>
</ul></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><p>Pclass</p></td>
<td style="text-align: left;"><p>Classe do passsageiro</p>
<ul>
<li><p>1 = 1st Class</p></li>
<li><p>2 = 2nd Class</p></li>
<li><p>3 = 3rd Class</p></li>
</ul></td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>Name</p></td>
<td style="text-align: left;"><p>Nome do passageiro</p></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><p>Sex</p></td>
<td style="text-align: left;"><p>Genero do passageiro</p>
<ul>
<li><p>Female</p></li>
<li><p>Male</p></li>
</ul></td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>Age</p></td>
<td style="text-align: left;"><p>Idade do passageiro</p></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><p>SibSp</p></td>
<td style="text-align: left;"><p>Quantidade de irm√£os e c√¥njuges a bordo</p></td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>Parch</p></td>
<td style="text-align: left;"><p>Quantidade de pais e filhos a bordo</p></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><p>Ticket</p></td>
<td style="text-align: left;"><p>N√∫mero da passagem</p></td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>Fare</p></td>
<td style="text-align: left;"><p>Pre√ßo da passagem</p></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><p>Cabin</p></td>
<td style="text-align: left;"><p>N√∫mero da Cabine do passageiro</p></td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>Embarked</p></td>
<td style="text-align: left;"><p>Porto de embarque</p>
<ul>
<li><p>C = Cherbourg</p></li>
<li><p>Q = Queenstown</p></li>
<li><p>S = Southampton</p></li>
</ul></td>
</tr>
</tbody>
</table>

## An√°lise Explorat√≥ria

Nesta etapa √© feita a prepara√ß√£o dos dados para que eles estejam aptos para receber qualquer t√©cnica de aplica√ß√£o estat√≠stica.

### Tratamento dos Dados

#### Tipo de Vari√°vel

A vari√°vel `Survived`, √© a vari√°vel *alvo* (dependente), ou seja, a vari√°vel de estudo e, est√° definida como *n√∫merica*, por essa raz√£o, √© preciso transform√°-la em uma vari√°vel do tipo *factor* pois trata-se de uma vari√°vel do tipo categ√≥rica.

O mesmo tratamento se aplicam √†s vari√°veis `Sex`, `Pclass` e `Embarked`

|  Vari√°vel  |             Tipo              |
|:----------:|:-----------------------------:|
| `Survived` | `r class(fulldados$Survived)` |
|   `Sex`    |   `r class(fulldados$Sex)`    |
|  `Pclass`  |  `r class(fulldados$Pclass)`  |
| `Embarked` | `r class(fulldados$Embarked)` |

: Classifica√ß√£o das vari√°veis antes do tratamento

```{r Transformar variavel para tipo Factor}
fulldados$Survived <- factor(c(fulldados$Survived),
                              levels = c(0,1), 
                              labels = c("No", "Yes"))

fulldados$Sex <- factor(c(fulldados$Sex),
                              levels = c("male", "female"),
                              labels = c("Male", "Female"))

fulldados$Pclass <- factor(c(fulldados$Pclass),
                              levels = c(1, 2, 3),
                              labels = c("1stClass", "2ndClass", "3rdClass"))

fulldados$Embarked <- factor(c(fulldados$Embarked),
                              levels = c("C", "Q", "S"),
                              labels = c("Cherbourg", "Queenstown", "Southampton"))

```

|  Vari√°vel  |             Tipo              |
|:----------:|:-----------------------------:|
| `Survived` | `r class(fulldados$Survived)` |
|   `Sex`    |   `r class(fulldados$Sex)`    |
|  `Pclass`  |  `r class(fulldados$Pclass)`  |
| `Embarked` | `r class(fulldados$Embarked)` |

: Classifica√ß√£o das vari√°veis depois da transforma√ß√£o

#### Valores Vazios

As vari√°veis `Age`, `Fare` e `Embarked` apresentam valores vazios (*NA's*).

Para a contru√ß√£o do modelo de *machine learning* tem-se duas op√ß√µes:

1.  Eliminar essas observa√ß√µes e/ou,

2.  Atribuir-lhes um valor.

Neste caso, ser√° considerado apenas a op√ß√£o (*2*).

‚ö†Ô∏è ***Vari√°vel Idade*** (`Age`)

Atribuir a mediana agrupada por g√™nero.

-   **Quantidade de valores vazios:** *`r sum(is.na(fulldados$Age))`*
-   **Dados estat√≠sticos:**

```{r Atibuir o valor da mediana nas vari√°vel Age, echo=TRUE, warning=FALSE}

fulldados <- fulldados %>% #Atribuir o valor da mediana na vari√°vel Age agrupado por g√™nero
  group_by(Sex) %>% 
  mutate(Age = ifelse(is.na(Age), median(Age, na.rm = TRUE), Age))
  summary(fulldados$Age)

```

üéüÔ∏è***Vari√°vel Pre√ßo do Bilhete*** (`Fare`)

Atribuir o valor da mediana.

-   **Quantidade de valores vazios:** *`r sum(is.na(fulldados$Fare))`*
-   **Dados estat√≠sticos:**

```{r Atibuir o valor da mediana nas vari√°vel Fare, echo=TRUE, warning=FALSE}

fulldados <- fulldados %>% #Atribuir o valor da mediana na vari√°vel Fare agrupado por g√™nero
  mutate(Fare = ifelse(is.na(Fare), median(Fare, na.rm = TRUE), Fare))
  summary(fulldados$Fare)
  
```

üìç***Vari√°vel Embarque*** (`Embarked`)

Atribuir o valor de maior frequ√™ncia.

-   **Quantidade de valores vazios:** *`r sum(is.na(fulldados$Embarked))`*
-   **Quantidade de passageiros por local de embarque:**

```{r}

fulldados$Embarked <- replace(fulldados$Embarked, which(is.na(fulldados$Embarked)), "Southampton")
summary(fulldados$Embarked)

```

#### Cria√ß√£o de Novas Vari√°veis

O tamanho da fam√≠lia e a faixa et√°ria podem ter um papel importante na predi√ß√£o.

Dessa forma, vari√°veis ser√£o unificadas e transformadas para se criar 03 novas vari√°veis, a saber:

‚ñ™ **Quantidade de Membros na Fam√≠lia** (`FamilyMembr`)

‚ñ™ **Tamanho da Fam√≠lia** (`FamilySize`)

‚ñ™Ô∏è **Faixa Et√°ria** (`AgeGP`)

üë®‚Äçüëß‚Äçüë¶***Quantidade de Membros na Fam√≠lia*** (`FamilyMembr`)

Gerada a partir da soma do n√∫mero de irm√£os/c√¥njuges (`SibSP`) e pais/filhos (`Parch`).

```{r}
fulldados$FamilyMembr <- fulldados$SibSp + fulldados$Parch + 1

```

üë®‚Äçüë©‚Äçüëß‚Äçüë¶***Tamanho da Fam√≠lia*** (`FamilySize`)

Vari√°vel criada para categorizar a quantidade de membros da familia em grupos

```{r message=FALSE, warning=FALSE}
fulldados$FamilySize[fulldados$FamilyMembr == 1] <- 'Individual' 
fulldados$FamilySize[fulldados$FamilyMembr < 5 & fulldados$FamilyMembr > 1] <- 'Pequena' 
fulldados$FamilySize[fulldados$FamilyMembr > 4] <- 'Grande' 
fulldados$FamilySize <- as.factor(fulldados$FamilySize)

```

|   Quantidade de Membros   | Tamanho da Fam√≠lia |
|:-------------------------:|:------------------:|
|         Igual a 1         |     Individual     |
| Maior que 1 e menor que 5 |      Pequena       |
|        Maior que 4        |       Grande       |

: Categoria do tamanho da fam√≠lia

```{r}
summary(fulldados$FamilySize)

```

üîû***Faixa Et√°ria*** (`AgeGP`)

Vari√°vel criada para categorizar os passageios em grupos de idade menor de 18 anos (*infantil*) e maior de 18 anos (*adulto*)

```{r Cria√ß√£o da vari√°vel Faixa Et√°ria, message=FALSE, warning=FALSE}
fulldados$AgeGP[fulldados$Age < 18] <- 'Infantil' 
fulldados$AgeGP[fulldados$Age >= 18] <- 'Adulto' 
fulldados$AgeGP <- as.factor(fulldados$AgeGP)
summary(fulldados$AgeGP)

```

### Visualiza√ß√£o Explorat√≥ria da Distribui√ß√£o dos Sobreviventes

```{r Grafico de sobreviventes por tamanho de fam√≠lia, warning=FALSE}

G1 <- ggplot(fulldados[1:891,], aes(x = FamilyMembr, fill = Survived)) +
 geom_bar(stat='count', position='dodge', alpha = 0.7, color = "dark gray") +
 labs(x = 'Quantidade de Membros', y = "Passageiros")+
 ggtitle("Tamanho da Fam√≠lia");

G2 <- ggplot(fulldados[1:891,], aes(x = FamilySize, fill = Survived)) +
 geom_bar(stat='count', position='dodge', alpha = 0.7, color = "dark gray") +
 labs(x = 'Categoria', y = "Passageiros")

ggarrange(G1, G2, ncol = 1,common.legend = TRUE, legend = "right"); 

```

```{r Taxa de sobrevi√™ncia por idade, g√™nero e classe do bilhete}

  ggplot(fulldados[1:891,], aes(x = Age, fill = Survived)) +
  labs(title = "Taxa de Sobreviv√™ncia por Idade, G√™nero e Classe do Bilhete")+
  facet_grid(Sex~Pclass, scales = "free")+
  labs(x = "Idade", y = "Taxa de Sobreviventes")+
  geom_dotplot(binwidth = 3)
  
```

```{r Grafico de sobreviventes por faixa et√°ria, g√™nero e classe do bilhete}

ggplot(fulldados[1:891,], aes(x = AgeGP, fill = Survived)) +
  labs(title = "Sobreviventes por Faixa Et√°ria, G√™nero e Classe do Bilhete")+
  facet_grid(Sex~Pclass, scales = "free")+
  labs(x= "Faixa Et√°ria", y = "Passageiros")+
  geom_bar(stat='count', position='dodge', alpha = 0.7, color = "dark gray")

```

## Prepara√ß√£o dos Dados para o Modelo de Machine Learning

### Sele√ß√£o das vari√°veis

Como pode ser observado abaixo, ap√≥s tratar os dados, o modelo de dados `fulldados` passou de 12 para 18 vari√°veis. Contudo, nem todas as vari√°veis (*features*) precisam ser consideradas na an√°lise.

Neste caso, as vari√°veis `PassengerId`,`Name`, `Age`, `SibSp`, `Parch`, `Ticket`,`Fare`,`Cabin` e `FamilyMembr` n√£o ser√£o consideradas pelo modelo de aprendizagem de m√°quina.

### Convers√£o de Vari√°veis em *dummies*

As vari√°veis `Sex`,`Pclass`, `Embarked`, `FamilySize` e `AgeGP` s√£o as vari√°veis *explicativas*, ou seja, os fatores que influenciam a vari√°vel alvo`Survived`. E por isso, √© preciso transform√°-las em variav√©is *dummies*.

Segundo @favero2016analise, uma vari√°vel dicot√¥mica ou bin√°ria (dummy) pode assumir apenas duas categorias, sendo que os valores O ou 1 s√£o atribu√≠dos a essas categorias. O valor 1 √© atribu√≠do quando a caracter√≠stica de interesse est√° presente na vari√°vel e o valor O, ou caso contr√°rio.

```{r Convertendo vari√°veis em dummies, message=FALSE, warning=FALSE}
#Remove vari√°vel dummizada original;
#Definer como categoria de refer√™ncia a dummy mais frequente.

fulldados <- dummy_columns(fulldados,

                                   select_columns = "Sex", 

                                   remove_selected_columns = T,

                                   remove_most_frequent_dummy = T)

fulldados <- dummy_columns(fulldados,

                                   select_columns = "Pclass", 

                                   remove_selected_columns = T,

                                   remove_most_frequent_dummy = T)

fulldados <- dummy_columns(fulldados,

                                   select_columns = "Embarked", 

                                   remove_selected_columns = T,

                                   remove_most_frequent_dummy = T)

fulldados <- dummy_columns(fulldados,

                                   select_columns = "FamilySize", 

                                   remove_selected_columns = T,

                                   remove_most_frequent_dummy = T)

fulldados <- dummy_columns(fulldados,

                                   select_columns = "AgeGP", 

                                   remove_selected_columns = T,

                                   remove_most_frequent_dummy = T)

summary(fulldados)


```

### Recuperando os Banco de Dados

Inicialmente os bancos de dados `train.csv` e `test.csv` foram unificados, gerando o bando de dados `fulldados`, no intuito de facilitar a an√°lise e o tratamento dos dados.

Para a constru√ß√£o do modelo de aprendizagem de m√°quina √© necess√°rio separar os bancos de dados para que fiquem como era no come√ßo.

```{r}
train <- fulldados[1:891,] 
test <- fulldados[892:1309,]
```

## Contru√ß√£o do Modelo de *Machine Learning*

Por se tratar de um problema de classifica√ß√£o, onde deseja-se saber se o passageiro sobreviveu ou n√£o a cat√°strofe.

Ser√° utilizado O modelo de aprendizagem de m√°quina do tipo supervisionado e o algoritmo escolhido ser√° o *Ramdom Forest*.

### Random Forest

```{r}

set.seed(123) #Permitir que o resultado seja reprodut√≠vel.
floresta <- randomForest(factor(Survived) ~ Sex_Female + Pclass_1stClass + Pclass_2ndClass + Embarked_Cherbourg + Embarked_Queenstown + FamilySize_Grande + FamilySize_Pequena + AgeGP_Infantil,
 data = train, importance = TRUE, ntree = 1000,mtry=2)

```

```{r}

print(floresta)
varImpPlot(floresta)
importance(floresta)


```

Agora que o modelo foi treinado, √© o momento de utilizar as informa√ß√µes do banco de dados de teste.

```{r}
Resultado <- predict(floresta, test)
submission <- data.frame(PassengerID = test$PassengerId, Survived = Resultado)
write.csv(submission, file = 'Submission.csv', row.names = F)
```

A Acur√°cia do modelo √© de 70%

# Refer√™ncias Bibliogr√°ficas
